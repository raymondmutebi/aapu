<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:p="http://primefaces.org/ui"
                template="/pages/freyatemplate/template.xhtml">

    <ui:define name="content">
        <div class="ui-g ui-fluid">
            <div class="ui-g-12">
                <ui:fragment rendered="#{!pgwRenderer.administrator}">
                    <div class="ui-g ui-fluid">
                        <div class="ui-g-12">
                            <div class="exception-topbar">
                                <h:link styleClass="logo">
                                    <p:graphicImage library="freya-layout" />
                                </h:link>
                            </div>

                            <div class="exception-panel">
                                <p:graphicImage styleClass="exception-icon"
                                                name="images/icon-access.png" library="freya-layout" />
                                <h1 class="exception-summary">Access Denied</h1>
                                <p class="exception-detail">
                                    You don't have the necessary permissions.<br></br> Contact the
                                    administrator for more information.
                                </p>
                            </div>

                        </div>
                    </div>
                </ui:fragment>

                <h:form id="appSettingForm"
                        rendered="#{ (pgwRenderer.administrator) }">
                    <div class="ui-g-12">
                        <div class="card">
                            <p:breadCrumb homeDisplay="text" styleClass="breadcrumbs">
                                <p:menuitem value="" />
                                <p:menuitem value="Home"
                                            style="font-size: 13px; margin-left: 5px !important; font-weight: bold !important;"
                                            url="#{homePage.viewPath}" />
                                <p:menuitem value="Settings" url="" />
                                <p:menuitem value="App Settings"
                                            url="#{appSettingForm.viewPath}" />
                            </p:breadCrumb>
                        </div>
                    </div>

                    
                        <div class="ui-g-12 ui-md-12 ui-lg-9">
                            <p:fieldset legend="Application Settings"
                                        style="margin-bottom:20px;  ">
                                <p:panelGrid columns="1" layout="grid"
                                             styleClass="ui-panelgrid-blank form-group">
                                    <h:outputText value="Egosms Api Url*" style="font-size: 18px;" />
                                    <p:inputText required="true"
                                                 value="#{appSettingForm.model.egosmsUrl}"
                                                 style="padding: 10px; font-size: 20px;"
                                                 placeholder="Enter Egosms Url here" />



                                    <h:outputText value="EgoSMS Api username*" style="font-size: 18px;" />
                                    <p:inputText required="true"
                                                 value="#{appSettingForm.model.egoSmsApiUsername}"
                                                 style="padding: 10px; font-size: 20px;"
                                                 placeholder="Enter egoSmsApiUsername here" />

                                    <h:outputText value="EgoSMS Api password*" style="font-size: 18px;" />

                                    <p:inputText required="true"
                                                 value="#{appSettingForm.model.egoSmsApiPassword}"
                                                 style="padding: 10px; font-size: 20px;"
                                                 placeholder="Enter egoSmsApiPassword here" />

                                    <h:outputText value="Payment Api Url*" style="font-size: 18px;" />
                                    <p:inputText required="true"
                                                 value="#{appSettingForm.model.paymentUrl}"
                                                 style="padding: 10px; font-size: 20px;"
                                                 placeholder="Enter Payment Url here" />

                                    <h:outputText value="Payment Api Username*" style="font-size: 18px;" />
                                    <p:inputText required="true"
                                                 value="#{appSettingForm.model.paymentApiUsername}"
                                                 style="padding: 10px; font-size: 20px;"
                                                 placeholder="Enter paymentApiPassword here" />


                                    <h:outputText value="Payment Api Password" style="font-size: 18px;" />
                                    <p:inputText required="true"
                                                 value="#{appSettingForm.model.paymentApiPassword}"
                                                 style="padding: 10px; font-size: 20px;"
                                                 placeholder="Enter paymentApiPassword here" />
                                    
                                     <h:outputText value="YoPayment Balace Code" style="font-size: 18px;" />
                                    <p:inputText required="true"
                                                 value="#{appSettingForm.model.balanceCode}" 
                                                 style="padding: 10px; font-size: 20px;" maxlength="20"
                                                 placeholder="Enter balaceCode e.g UGX-MTNMM" />


                                </p:panelGrid>

                            </p:fieldset>

                            <div class="ui-g">
                                <div class="ui-g-1">
                                    <div style="text-align: center">
                                        <p:commandButton icon="fa fa-save" value="Save" id="saveBtn"
                                                         styleClass="green-btn" validateClient="true"
                                                         style="margin-bottom:15px; " action="#{appSettingForm.save}"
                                                         update="appSettingForm" />
                                    </div>
                                </div>
                                <div class="ui-g-1">
                                    <p:button value="Back" styleClass="red-btn"
                                              icon="fa fa-backward" 
                                              outcome="#{appSettingForm.parentView}" />
                                </div>
                            </div>
                        </div>

                        <div class="ui-g-12 ui-md-12 ui-lg-3">
                            <p:fieldset legend="Extra Tools">
                                <p:commandButton icon="fa fa-external-link-square" styleClass="green-btn"
                                                 process="@this" style="margin-bottom: 10px"
                                                 id="runBtn" action="#{appSettingForm.fetchTransactions()}"
                                                 update="appSettingForm" value="Update Stuck Payments">
                                </p:commandButton>

                                <p:commandButton icon="fa fa-credit-card" styleClass="pink-btn" process="@this"
                                                 id="payBtn" action="#{appSettingForm.payRefferes()}" style="margin-bottom: 10px"
                                                 update="appSettingForm" value="Pay Stuck Refferes">
                                </p:commandButton>
                                
                                 <p:commandButton icon="fa fa-paper-plane-o" styleClass="blue-btn" process="@this" style="margin-bottom: 10px"
                                                  id="sendBtn" action="#{appSettingForm.sendUnsentMessages()}"
                                                 update="appSettingForm" value="Send Stuck Messages">
                                </p:commandButton>
                            </p:fieldset>
                        </div>
                   
                    <p:blockUI block="appSettingForm" trigger="saveBtn">
                        <p:graphicImage value="/resources/images/workingicon.png" />
                    </p:blockUI>
                    <p:blockUI block="appSettingForm" trigger="runBtn">
                        <p:graphicImage value="/resources/images/workingicon.png" />
                    </p:blockUI>
                    <p:blockUI block="appSettingForm" trigger="payBtn">
                        <p:graphicImage value="/resources/images/workingicon.png" />
                    </p:blockUI>
                     <p:blockUI block="appSettingForm" trigger="sendBtn">
                        <p:graphicImage value="/resources/images/workingicon.png" />
                    </p:blockUI>
                </h:form>
            </div>

        </div>
    </ui:define>
</ui:composition>