<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:p="http://primefaces.org/ui"
      lang="en">

    <h:head>
        <f:facet name="first">
            <meta http-equiv="X-UA-Compatible" content="IE=edge" />
            <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
            <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0"/>
            <meta name="apple-mobile-web-app-capable" content="yes" />
            <link rel="icon" href="#{request.contextPath}/resources/freya-layout/images/uma-logo.png" type="image/x-icon"></link>
        </f:facet>
        <title><ui:insert name="title">AAPU</ui:insert></title>
         <link rel="shortcut icon" type="image/x-icon"
              href="#{request.contextPath}/resources/images/favicon_ico.png" />
        <h:outputScript name="js/layout.js" library="freya-layout" />
        <ui:insert name="head"/>
    </h:head>

    <h:body styleClass="#{guestPreferences.inputStyleClass}" >

        <div class="ui-g-12  layout-wrapper layout-topbar-#{guestPreferences.topbarTheme} layout-menu-#{guestPreferences.menuTheme} #{guestPreferences.menuMode}" >
            <div class="ui-g-4 card-body" style="text-align: center">
                <h2>Become a member</h2>
                <h:link  styleClass="logo">
                    <p:graphicImage name="images/uma-logo.png" width="200" height="200" library="freya-layout" />
                </h:link>
                <p style="padding: 10%;font-size: 18px;color: #35557e">Nullam non efficitur tellus. Aenean sapien magna, vulputate dictum odio quis, 
                    ornare maximus elit. Vestibulum quis dolor eget sem lacinia consectetur. 
                    Integer ac accumsan enim. Cras eget nunc non ipsum dignissim blandit. 
                    Donec ex eros, lobortis eu nisi dictum, semper pulvinar ante. Donec mauris nisl, posuere vitae arcu a, 
                    finibus finibus ante. Duis blandit eros quam, in tempor ex dignissim eget. Quisque condimentum sapien non 
                    lorem feugiat rutrum. Maecenas ac ullamcorper arcu. Maecenas non dolor non nunc facilisis malesuada sit amet vel erat.
                </p>
            </div>   
            <div class="ui-g-8">
                <h:form id="externalMemberForm" style="width:100% " enctype="multipart/form-data">

                    <ui:fragment rendered="#{externalMemberForm.showForm}">
                        <div class="ui-g ui-g-12 ui-md-12 ui-lg-nopad">
                            <div class="ui-g-12 ui-md-12 ui-lg-12 NoMargin">

                                <div class="card card-w-title" style="width: 100%;height: 100%">
                                    <div class="ui-g-12 ui-md-12 ui-lg-12">

                                        <p:fieldset style="margin-bottom:20px">
                                            <div class="ui-g-12 ui-md-12 ui-lg-12" style="margin-bottom:20px">
                                                <div class="ui-g-12 ui-md-12 ui-lg-12">

                                                    <h:outputText value="First name" style="font-size: 18px;" />
                                                    <span style="color: red"> * </span> 

                                                    <p:inputText required="true" 
                                                                 value="#{externalMemberForm.model.firstName}"
                                                                 style="padding: 10px;margin-bottom: 2%; font-size: 20px; width: 95%" />
                                                </div>
                                                <div class="ui-g-12 ui-md-12 ui-lg-6" >
                                                    <h:outputText value="Last name" style="font-size: 18px;" />
                                                    <span style="color: red"> * </span> 

                                                    <p:inputText required="false"

                                                                 value="#{externalMemberForm.model.lastName}"
                                                                 style="padding: 10px;margin-bottom: 2%; font-size: 20px; width: 90%" /><br/>

                                                </div>


                                                <div class="ui-g-12 ui-md-12 ui-lg-6" >
                                                    <h:outputText value="Phone Number" style="font-size: 18px;" />
                                                    <span style="color: red"> * </span><br/>

                                                    <p:inputText  required="true"
                                                                  value="#{externalMemberForm.model.phoneNumber}"
                                                                  style="padding: 10px;margin-bottom: 2%; font-size: 20px; width: 90%" />


                                                </div>
                                                <div class="ui-g-12 ui-md-12 ui-lg-6" >
                                                    <h:outputText value="Email address" style="font-size: 18px;" />
                                                    <span style="color: red"> * </span><br/>

                                                    <p:inputText placeholder="Email" required="true"
                                                                 value="#{externalMemberForm.model.emailAddress}"
                                                                 style="padding: 10px;margin-bottom: 2%; font-size: 20px; width: 90%" />


                                                </div>

                                                <div class="ui-g-12 ui-md-12 ui-lg-6" >
                                                    <h:outputText value="Physical address" style="font-size: 18px;" />
                                                    <span style="color: red"> * </span><br/>

                                                    <p:inputText placeholder="Location" required="false"
                                                                 value="#{externalMemberForm.model.location}"
                                                                 style="padding: 10px;margin-bottom: 2%; font-size: 20px; width: 90%" />


                                                </div>


                                                <div class="ui-g-12 ui-md-12 ui-lg-4 " style="margin-left: auto" >
                                                    <h:outputText value="Profession" style="font-size: 18px;" />
                                                    <span style="color: red"> * </span><br/>
                                                    <p:selectOneMenu  value="#{externalMemberForm.model.profession}" 
                                                                      id="sector" converter="lookUpValueConverter" var="sector"
                                                                      effect="fade" filter="true"  style="padding: 10px;margin-bottom: 2%; font-size: 20px; width: 90%" 
                                                                      filterMatchMode="startsWith">
                                                        <f:selectItem itemLabel="Select sector"
                                                                      itemValue="#{null}" />
                                                        <f:selectItems value="#{externalMemberForm.professionals}" var="sector"
                                                                       itemLabel="#{sector}" itemValue="#{sector}" />
                                                        <p:column>
                                                            <h:outputText value="#{sector}" />
                                                        </p:column>
                                                    </p:selectOneMenu>
                                                </div>
                                                <div class="ui-g-12 ui-md-12 ui-lg-4 " style="margin-left: auto" >
                                                    <h:outputText value="Gender" style="font-size: 18px;" />
                                                    <span style="color: red"> * </span><br/>
                                                    <p:selectOneMenu  value="#{externalMemberForm.model.gender}" 
                                                                      id="gender"   effect="fade" 
                                                                      style="padding: 10px;margin-bottom: 2%; font-size: 20px; width: 90%" 
                                                                      >

                                                        <f:selectItems value="#{externalMemberForm.genders}"/>

                                                    </p:selectOneMenu>
                                                </div>

                                            </div>
                                            <div class="ui-g-12 ui-md-12 ui-lg-12" >
                                                <div style="text-align: end; display: flex">

                                                    <p:commandButton  value="Submit" id="saveBtn"
                                                                     styleClass="green-btn" validateClient="true"
                                                                     style="margin-left: auto"
                                                                     action="#{externalMemberForm.createMember()}"
                                                                     update="externalMemberForm" />

                                                </div>


                                            </div>
                                        </p:fieldset>


                                    </div>



                                </div>


                            </div>
                        </div>
                    </ui:fragment>

                    <ui:fragment id="codeSection" rendered="#{externalMemberForm.showCodeSection}">
                        <div class="card card-w-title" style="width: 100%;height: 100%">
                            <div class="ui-g-12 ui-md-12 ui-lg-12" style="margin-bottom:20px">
                                <h:outputText value="Enter code sent to your email" style="font-size: 18px;" />
                                <span style="color: red"> * </span> 

                                <p:inputText required="true" 
                                             value="#{externalMemberForm.verificationCode}"
                                             style="padding: 10px;margin-bottom: 2%; font-size: 20px; width: 95%" />

                                <p:commandButton icon="fa fa-save" 
                                                 process="codeSection"
                                                 value="Submit" id="saveBtn2"
                                                 styleClass="green-btn" validateClient="true"
                                                 action="#{externalMemberForm.verifyCode()}"
                                                 update="externalMemberForm" />


                            </div>
                        </div>
                    </ui:fragment>
                    
                    <ui:fragment id="paymentSection" rendered="#{externalMemberForm.showPaymentSection}">
                        <div class="card card-w-title" style="width: 100%;height: 100%">
                            <div class="ui-g-12 ui-md-12 ui-lg-12" style="margin-bottom:20px">
                                <h:outputText value="Enter mobile money number for phone payment" style="font-size: 18px;" />
                                <span style="color: red"> * </span> 

                                <p:inputText required="true" 
                                             placeholder="eg 256755170341"
                                             value="#{externalMemberForm.paymentPhoneNumber}"
                                             style="padding: 10px;margin-bottom: 2%; font-size: 20px; width: 95%" />

                                <p:commandButton icon="fa fa-save" 
                                                 process="paymentSection"
                                                 value="Submit" id="saveBtn3"
                                                 styleClass="green-btn" validateClient="true"
                                                 action="#{externalMemberForm.makePayment()}"
                                                 update="externalMemberForm" />


                            </div>
                        </div>
                    </ui:fragment>
                    
                    <ui:fragment id="postMessageSection" rendered="#{externalMemberForm.showSuccessMessageSection}">
                        <div class="card card-w-title" style="width: 100%;height: 100%">
                            <div class="ui-g-12 ui-md-12 ui-lg-12" style="margin-bottom:20px">
                                <h4>Enter your pin to complete payment. After payment, check your email for login credentials</h4>
                                <p:commandButton icon="fa fa-save" 
                                                 value="Submit" id="saveBtn4"
                                                 styleClass="green-btn" validateClient="true"
                                                 action="#{externalMemberForm.makePayment()}"
                                                 update="externalMemberForm" />


                            </div>
                        </div>
                    </ui:fragment>
                    <p:blockUI block="externalMemberForm" trigger="saveBtn">
                        <p:graphicImage value="/resources/images/workingicon.png" />
                    </p:blockUI>
                </h:form>

            </div>

        </div>
    </h:body>

</html>